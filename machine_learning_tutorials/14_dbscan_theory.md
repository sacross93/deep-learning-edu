# DBSCAN 클러스터링 이론

## 1. DBSCAN 개요

### 1.1 DBSCAN이란?
**DBSCAN (Density-Based Spatial Clustering of Applications with Noise)**는 밀도 기반 클러스터링 알고리즘으로, 1996년 Martin Ester 등에 의해 개발되었습니다.

### 1.2 핵심 아이디어
- **밀도**: 특정 반경 내에 있는 데이터 포인트의 개수
- **클러스터**: 충분히 밀도가 높은 영역
- **노이즈**: 어떤 클러스터에도 속하지 않는 이상치

### 1.3 주요 특징
- 클러스터 개수를 미리 지정할 필요 없음
- 임의의 모양의 클러스터 발견 가능
- 노이즈와 이상치 자동 탐지
- 밀도가 다른 클러스터도 처리 가능

## 2. DBSCAN 핵심 개념

### 2.1 주요 파라미터
1. **ε (epsilon)**: 이웃을 정의하는 반경
2. **MinPts**: 핵심점이 되기 위한 최소 이웃 개수

### 2.2 점의 분류
```
1. 핵심점 (Core Point)
   - ε 반경 내에 MinPts 개 이상의 점이 있는 점
   
2. 경계점 (Border Point)
   - 핵심점은 아니지만 핵심점의 ε 반경 내에 있는 점
   
3. 노이즈점 (Noise Point)
   - 핵심점도 경계점도 아닌 점
```

### 2.3 밀도 연결성
- **직접 밀도 도달 가능**: 점 p가 핵심점이고 q가 p의 ε 반경 내에 있음
- **밀도 도달 가능**: 핵심점들의 연쇄를 통해 도달 가능
- **밀도 연결**: 두 점이 공통의 점으로부터 밀도 도달 가능

## 3. DBSCAN 알고리즘

### 3.1 알고리즘 단계
```python
def DBSCAN(데이터, ε, MinPts):
    1. 모든 점을 미방문으로 표시
    2. 각 미방문 점 p에 대해:
       a. p를 방문으로 표시
       b. NeighborPts = regionQuery(p, ε)
       c. if |NeighborPts| < MinPts:
            p를 노이즈로 표시
          else:
            새 클러스터 C 생성
            expandCluster(p, NeighborPts, C, ε, MinPts)
    3. 결과 반환
```

### 3.2 클러스터 확장
```python
def expandCluster(p, NeighborPts, C, ε, MinPts):
    C에 p 추가
    for 각 점 p' in NeighborPts:
        if p'가 미방문:
            p'를 방문으로 표시
            NeighborPts' = regionQuery(p', ε)
            if |NeighborPts'| >= MinPts:
                NeighborPts = NeighborPts ∪ NeighborPts'
        if p'가 어떤 클러스터에도 속하지 않음:
            C에 p' 추가
```

## 4. 파라미터 선택

### 4.1 ε (epsilon) 선택
1. **k-distance 그래프**
   - 각 점에서 k번째 가장 가까운 이웃까지의 거리
   - k = MinPts - 1로 설정
   - 그래프에서 "무릎" 지점을 ε로 선택

2. **도메인 지식 활용**
   - 데이터의 특성과 의미를 고려
   - 예: 지리 데이터에서는 실제 거리 의미 고려

### 4.2 MinPts 선택
1. **일반적 가이드라인**
   - MinPts ≥ 차원 수 + 1
   - 2차원: MinPts = 4
   - 고차원: MinPts = 2 × 차원 수

2. **데이터 특성 고려**
   - 노이즈가 많은 데이터: 더 큰 MinPts
   - 작은 클러스터 탐지: 더 작은 MinPts

## 5. DBSCAN vs 다른 알고리즘

### 5.1 K-평균과의 비교
| 특성 | DBSCAN | K-평균 |
|------|--------|--------|
| 클러스터 개수 | 자동 결정 | 사전 지정 필요 |
| 클러스터 모양 | 임의 모양 | 구형 |
| 노이즈 처리 | 자동 탐지 | 처리 안됨 |
| 계산 복잡도 | O(n log n) | O(nkt) |
| 파라미터 민감도 | 높음 | 보통 |

### 5.2 계층적 클러스터링과의 비교
| 특성 | DBSCAN | 계층적 |
|------|--------|---------|
| 계산 복잡도 | O(n log n) | O(n³) |
| 메모리 사용량 | O(n) | O(n²) |
| 노이즈 처리 | 우수 | 보통 |
| 클러스터 모양 | 임의 | 제한적 |
| 결과 해석 | 직관적 | 덴드로그램 |

## 6. DBSCAN의 장단점

### 6.1 장점
1. **클러스터 개수 자동 결정**
   - 사전 지식 불필요
   - 탐색적 데이터 분석에 유용

2. **임의 모양 클러스터 탐지**
   - 비구형 클러스터도 잘 찾음
   - 복잡한 데이터 구조 처리

3. **노이즈 자동 탐지**
   - 이상치 탐지 기능 내장
   - 데이터 품질 향상에 도움

4. **결정론적 결과**
   - 동일한 입력에 대해 같은 결과
   - 재현 가능한 분석

### 6.2 단점
1. **파라미터 민감도**
   - ε, MinPts 선택이 결과에 큰 영향
   - 적절한 파라미터 찾기 어려움

2. **밀도 차이 처리 한계**
   - 매우 다른 밀도의 클러스터 동시 처리 어려움
   - 전역 파라미터의 한계

3. **고차원 데이터 문제**
   - 차원의 저주로 성능 저하
   - 거리 개념의 의미 약화

4. **메모리 사용량**
   - 거리 계산과 이웃 탐색에 메모리 필요
   - 매우 큰 데이터셋에서는 제한적

## 7. DBSCAN 변형 알고리즘

### 7.1 OPTICS
- **Ordering Points To Identify Clustering Structure**
- 다양한 밀도의 클러스터 처리
- 클러스터링 순서 정보 제공

### 7.2 HDBSCAN
- **Hierarchical DBSCAN**
- 계층적 구조와 밀도 기반 접근법 결합
- 다양한 밀도 레벨에서 안정적인 클러스터 탐지

### 7.3 DBSCAN++
- 개선된 파라미터 선택 방법
- 적응적 ε 값 사용
- 더 나은 클러스터 품질

## 8. 실제 적용 사례

### 8.1 지리 정보 시스템 (GIS)
- **핫스팟 탐지**: 범죄, 사고 발생 지역
- **도시 계획**: 상업 지역, 주거 지역 분석
- **환경 모니터링**: 오염 지역 탐지

### 8.2 이미지 처리
- **객체 분할**: 유사한 픽셀 그룹화
- **의료 영상**: 종양, 병변 탐지
- **위성 영상**: 토지 이용 분류

### 8.3 네트워크 분석
- **소셜 네트워크**: 커뮤니티 탐지
- **웹 분석**: 유사한 페이지 그룹화
- **통신 네트워크**: 트래픽 패턴 분석

### 8.4 이상치 탐지
- **금융**: 사기 거래 탐지
- **제조업**: 불량품 탐지
- **IT 보안**: 비정상 접근 패턴 탐지

## 9. 성능 평가

### 9.1 내부 평가 지표
1. **실루엣 계수**
   - 클러스터 내 응집도와 클러스터 간 분리도
   - 노이즈 포인트 제외하고 계산

2. **Davies-Bouldin 지수**
   - 클러스터 내 분산과 클러스터 간 거리 비율
   - 낮을수록 좋음

### 9.2 외부 평가 지표
1. **조정 랜드 지수 (ARI)**
   - 실제 레이블과의 일치도
   - 우연에 의한 일치 보정

2. **정규화 상호 정보량 (NMI)**
   - 정보 이론 기반 유사도
   - 클러스터 개수 차이 보정

## 10. 구현 시 고려사항

### 10.1 효율적인 이웃 탐색
- **KD-Tree**: 저차원 데이터
- **Ball Tree**: 고차원 데이터
- **LSH**: 근사 이웃 탐색

### 10.2 메모리 최적화
- **배치 처리**: 큰 데이터셋 분할 처리
- **스트리밍**: 온라인 DBSCAN
- **병렬 처리**: 멀티코어 활용

### 10.3 전처리
- **정규화**: 특성 스케일 통일
- **차원 축소**: PCA, t-SNE 등 활용
- **노이즈 제거**: 사전 필터링

## 요약

DBSCAN은 밀도 기반 클러스터링의 대표적인 알고리즘으로, 다음과 같은 상황에서 특히 유용합니다:

1. **클러스터 개수를 모르는 경우**
2. **비구형 클러스터가 예상되는 경우**
3. **노이즈와 이상치 탐지가 중요한 경우**
4. **공간 데이터나 지리 정보를 다루는 경우**

적절한 파라미터 선택과 데이터 전처리를 통해 DBSCAN은 매우 강력한 클러스터링 도구가 될 수 있습니다.